<nav class="hidden md:flex md:space-x-4 lg:space-x-8 items-center">

  @for (item of navItems; track item) {
    @if (!item.subItems) {
      <button
        (click)="selectPage(item.id, item.path)"
        [class]="isCurrentPage(item.id)
                ? 'text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-500 font-semibold'
                : 'text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400'"
        class="px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200">
        {{ item.label | transloco }}
      </button>
    }
    @else {
      <div class="relative group">
        <button
          (click)="toggleAccountDropdown()"
          (blur)="closeAccountDropdown()"
          class="flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200"
          [class]="isAccountActive()
                  ? 'text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-500 font-semibold'
                  : 'text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400'">
          {{ item.label | transloco }}
          <svg class="ml-1 h-5 w-5 transition-transform duration-200"
               [class.rotate-180]="isAccountDropdownOpen"
               xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
                  d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.21 8.27a.75.75 0 01.02-1.06z"
                  clip-rule="evenodd"/>
          </svg>
        </button>

        @if (isAccountDropdownOpen) {
          <div class="absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-700 ring-1 ring-black ring-opacity-5 focus:outline-none">
            @for (subItem of item.subItems; track subItem) {
              <button
                (click)="selectPage(subItem.id, subItem.path)"
                class="block px-4 py-2 text-sm w-full text-left transition-colors duration-150"
                [class]="isCurrentPage(subItem.id)
                        ? 'bg-indigo-50 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 font-medium'
                        : 'text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600'">
                {{ subItem.label | transloco }}
              </button>
            }
          </div>
        }
      </div>
    }
  }
</nav>
